<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="UTF-8">
  <link href="http://gmpg.org/xfn/11" rel="profile">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>
    
      Rinocloud Labview tutorial &middot; Rinocloud
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/styles.css">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-precomposed.png">
  <link rel="shortcut icon" href="https://s3-eu-west-1.amazonaws.com/rinocloud/static/Rreverse.png">
  <!-- RSS -->
  <link rel="alternate" type="application/atom+xml" title="Rinocloud" href="/atom.xml">
</head>


  <body>

    <div class="container content">
      <header class="masthead">
        <h3 class="masthead-title">
          <a href="/" title="Home">Rinocloud</a>
          <small>blog</small>
          <small><a style="float:right; margin-top:5px;" href="https://rinocloud.com">go to rinocloud.com</a></small>
        </h3>

      </header>

      <main>
        <article class="post">
  <h1 class="post-title">Rinocloud Labview tutorial</h1>
  <time datetime="2016-01-12T17:34:57+00:00" class="post-date">12 Jan 2016</time>
  <div class="post-date">by Gediminas</div>
  <h2 id="introduction">Introduction</h2>

<p>The Rinocloud LABView application programming interface (API) library contains VIs which ensure communication with Rinocloud servers by converting measured numerical data and metadata to JSON (JavaScript Object Notation) string and saving to the server. The current version of this library is adapted for a HTTP POST request, which saves <strong>numerical data</strong> to the Rinocloud database.</p>

<p>JSON is an open standard format that uses human-readable text to transmit data objects consisting of attribute–value pairs. The library contains VIs which ensure that the correct JSON payload is sent to the server, which parses the request and transforms it into in the following form:</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="p">{</span>
<span class="s">"category"</span><span class="p">:</span> <span class="s">"string, required"</span><span class="p">,</span>
<span class="s">"tags"</span><span class="p">:</span> <span class="p">[</span><span class="n">array</span><span class="p">,</span> <span class="n">optional</span><span class="p">],</span>
<span class="s">"notes"</span><span class="p">:</span> <span class="s">"string, optional"</span><span class="p">,</span>
<span class="s">"json_field"</span><span class="p">:</span> <span class="p">{</span><span class="n">JSON</span> <span class="nb">object</span><span class="p">,</span> <span class="n">optional</span><span class="p">},</span>
<span class="s">"data"</span><span class="p">:</span> <span class="p">[</span><span class="n">array</span><span class="p">,</span> <span class="n">optional</span><span class="p">]</span>
<span class="p">}</span></code></pre></figure>

<p><img src="http://i.imgur.com/aS7qsis.png" alt="Library tree" /></p>

<p>A basic functional example of saving numerical data and corresponding metadata is shown below.</p>

<p><img src="http://i.imgur.com/q21VCu0.png" alt="A basic functional example" /></p>

<p><strong>Three</strong> VIs should be used to prepare a correct JSON payload:
1. Rino data to JSON encoder.vi
2. Rino parameters to JSON encoder.vi
3. Rino HTTP request.vi</p>

<p>The functionality of each Virtual Instrument is described below. After getting familiar with them, it’s advisable to analyse two examples <strong>Rino client example.vi</strong> and <strong>Rino client simulator.vi</strong>, which contain realistic examples showing some usage cases, like populating data, metadata variables.</p>

<h2 id="getting-started">Getting started</h2>

<p>Before connecting to Rinocloud, valid connection and authentication parameters must be set in <strong>Rino client global variable.vi</strong>.  The global variable contains essential communication parameters: (<strong>Token</strong>) an authentication token and (<a href="https://rinocloud.com/api/1/objects/"><strong>Rino url</strong></a>) an API address. Both parameters are required. Token can be obtained by registered and logged in users from <a href="https://rinocloud.com/integrations">https://rinocloud.com/integrations</a></p>

<p><img src="http://i.imgur.com/v8NieWn.png" alt="Global variable" /></p>

<p><strong>Hint:</strong> To save the values as default, select Edit→Make Current Values Default, and Save.</p>

<h2 id="what-data-can-be-saved">What data can be saved?</h2>

<p>The current version of the library enables saving arrays of <strong>numerical</strong> and <strong>text</strong> data. The options of data being saved span from a single array (or a single value placed in the array) to spectrum-like data, where data can contain x-axis, the actual data (1 or more curves, let’s call them subsets) from the measurement or calculation, and labeling of each subset, which is referred here as z-axis (an example would be <em>laser excitation power dependent set of photoluminescence spectra, where x-axis contains the range of wavelength, data array contains stacked spectra (several curves) and z-axis labels each curve with the laser intensity values (or timestamps if you prefer in your experiment)</em>).</p>

<p><img src="http://i.imgur.com/d2dxA1C.png" alt="data encoder VI" /></p>

<p>First, data needs to be encoded to the format accepted by the API. <strong>Rino data to JSON encoder.vi</strong> VI takes care of the most of the cases - it accepts data and converts it to a JSON format array. As it is the polymorphic VI, it will adapt automatically to the type of data entered. This feature allows saving various combinations of data arrays.</p>

<p><strong>x axis</strong> holds values for the x axis or it is just an array of arbitrary data values. It is an one-dimensional array (a row) of integer, double or string values.
If a single array of numerical or text data needs to be saved, only this terminal can be populated.</p>

<p><strong>1D(2D) data array</strong> (optional) holds data. It is either one- or two-dimensional array of integer or double values. If it is a set of data (e.g., stacked curves), every individual record has to be presented as a row in a two-dimensional array.</p>

<p><strong>z axis</strong> (optional) is available only when two-dimensional data is being entered. It is an one-dimensional array (a row) of integer, double or string values. It can be used to label individual rows of data saved in a two-dimensional array.</p>

<p><strong>data JSON string</strong> is an output string representing a JSON array.
For example,
1. x-array [x1,x2,..,xn] and 1D array [y11,y12,…,y1n] are encoded to [[x1,y11],[x2,y12],…,[xn,y1n]]
2. x-array [x1,x2,..,xn] , 2D array[ [y11,y12,…,y1n],[y21,y22,…,y2n]], z-array  [z1,z2]  are encoded to [[z1, z2], [x1,y11,y21],[x2,y12,y22],…,[xn,y1n,y2n]]</p>

<h2 id="adding-metadata">Adding metadata</h2>

<p>Metadata encoding is handled by <strong>Rino parameters to JSON encoder.vi</strong>.</p>

<p><img src="http://i.imgur.com/7LERcRo.png" alt="metadata encoder VI" /></p>

<p>The VI accepts metadata and converts it to JSON format accepted by Rinocloud API.</p>

<p><strong>Metadata</strong> is a cluster of 3 string elements to pass values to the attribute-value pairs: (1 - required) “category”: “string”,(2 - optional) “tags”: [array] and (3 - optional)  “notes”: “string”.
“category” can be used as a descriptor of a group of data (e.g., “measurements”, “sensors”).
“tags” are keywords and terms that make records more searchable. Although Rinocloud API accepts this value as a JSON array of strings, in the LABView VI the value has to be passed as a flattened spreadsheet string or a string where tags are separated by commas (e.g., “tag1,tag2,tag3”).
 “notes” string is meant to describe the record with specific information.</p>

<p><strong>Hint:</strong> To create a default cluster, right-click the Inputs terminal, select Create→Control.
The metadata cluster can be populated using <em>Bundly By Name</em> function:</p>

<p><img src="http://i.imgur.com/XEHqrEH.png" alt="Metadata cluster" /></p>

<p><strong>Data JSON string</strong> is a string containing the value created by <strong>Rino data to JSON encoder.vi</strong> to create an attribute-value pair “data”: […].</p>

<p><strong>extra metadata array</strong> enables saving custom metadata by sending it to the VI for the conversion to JSON type attribute-value pairs. These pairs are held as a JSON object in “json_field”: {JSON object}. The terminal has to be populated by an array which contains a cluster(s) of 3 elements: 2 strings (1 - required) “attribute”, (2 - required) “value” and 1 integer (3 - required) “Data type”.  Each cluster is processed to an “attribute”:”value” string.
1. “attribute” is a string.
2. “value” is a string. The field can store a single integer (double) value, text, a single dimension array of strings, a single dimension array of integers (doubles) or even data prepared by <strong>Rino data to JSON encoder.vi</strong>. The data need to be pre-converted to a string or a spreadsheet string before sending to the VI.
3. “Data type” indicates the original data type of information stored in the “value” field, in order to ensure conversion to JSON compatible format. Possible values are: 0 – integer (double), 1 – string, 2 – an array of strings, 3 – an array of integers (doubles), 4 – data JSON string an output string of Rino data to JSON encoder.vi (it can be used to encode an auxiliary 2 dimentional array data), 5 – <null> the cluster is ignored.</null></p>

<p><strong>Hint:</strong> check Rino client basic example.vi  and Rino client simulator.vi for different options how to construct extra metadata array clusters:</p>

<p><img src="http://i.imgur.com/xwkXpHB.png" alt="Constructing metadata clusters" /></p>

<p><strong>JSON string</strong> is the final string prepared for the HTTP request.</p>

<h2 id="saving-data-to-rinocloud">Saving data to Rinocloud</h2>

<p>The data is saved by __Rino HTTP request.vi __. The VI sends HTTP POST request.</p>

<p><img src="http://i.imgur.com/E4gHX9k.png" alt="http request VI" /></p>

<p><strong>JSON string</strong> is a JSON payload prepared by <strong>Rino parameters to JSON encoder.vi</strong>.</p>

<p><strong>headers</strong> is a server response header.</p>

<p><strong>body</strong> is a server response body, including error messages.</p>

<p><strong>record id</strong> is an ID of the recent successfully saved record. It can be used for the custom API calls.</p>

<p><strong>Data saved</strong> is a boolean which returns True if the record was saved successfully, False if not.</p>

</article>


<aside class="related">
  <h2>Related Posts</h2>
  <ul class="related-posts">
    
      <li>
        <h3>
          <a href="/blog/2016/01/18/why-i-started-rinocloud.html">
            Why I left my PhD at Cambridge to start Rinocloud
            <small><time datetime="2016-01-18T07:34:57+00:00">18 Jan 2016</time></small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/jekyll/update/2016/01/12/api-explorer.html">
            API explorer
            <small><time datetime="2016-01-12T17:34:57+00:00">12 Jan 2016</time></small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/jekyll/update/2016/01/12/saving-data-with-numpy.html">
            Saving data with numpy vstack
            <small><time datetime="2016-01-12T17:34:57+00:00">12 Jan 2016</time></small>
          </a>
        </h3>
      </li>
    
  </ul>
</aside>


      </main>

      <footer class="footer">
        <small>
          &copy; <time datetime="2016-01-25T12:12:18+00:00">2016</time>. All rights reserved.
        </small>
      </footer>
    </div>

  </body>
</html>
